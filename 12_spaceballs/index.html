<!DOCTYPE html>
<html>
 <head>
    <style>

        body,
        svg {
          height: 100%;
          margin: 0;
          width: 100%;
          float: left;
        }    
        div {width: 100%; height: 100%;z-index: -100; position: absolute; top: 0; left: 0;}
    </style>       
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script type="text/javascript">
        let frame = 0
        let frames = {}
        async function create() {
            frames = await fetch("frames.json")
                .then(response => response.json())
                .then(json => frames = json);            


            /*let svg = d3.select("#svgcontainer").html("").append("svg").attr("viewBox", "0 0 1280.000000 720.000000");

            let dancer = svg.append("g").attr("transform", 'translate(0.000000,720.000000) scale(0.100000,-0.100000)')
            dancer.append("path").attr("d", frames.frames[(frame + 1) % frames.frames.length].path).attr("fill", "hsl(" + (frame + 0) % frames.frames.length + ", 70%, 43%)").attr("fill-opacity", "0.25");*/    

            setInterval(update, 40)



        }

        function update() {
            let svg = d3.select("#svgcontainer").html("").append("svg").attr("viewBox", "0 0 1280.000000 720.000000");

            let dancer = svg.append("g").attr("transform", 'translate(0.000000,720.000000) scale(0.100000,-0.100000)')
            dancer.append("path").attr("d", frames.frames[Math.abs((frame - 4) % frames.frames.length)].path).attr("fill", "hsl(" + (frame + 80) % frames.frames.length + ", 70%, 43%)").attr("fill-opacity", "0.25");    
            dancer.append("path").attr("d", frames.frames[Math.abs((frame - 3) % frames.frames.length)].path).attr("fill", "hsl(" + (frame + 60) % frames.frames.length + ", 70%, 43%)").attr("fill-opacity", "0.25");    
            dancer.append("path").attr("d", frames.frames[Math.abs((frame - 2) % frames.frames.length)].path).attr("fill", "hsl(" + (frame + 40) % frames.frames.length + ", 70%, 43%)").attr("fill-opacity", "0.25");    
            dancer.append("path").attr("d", frames.frames[Math.abs((frame - 1) % frames.frames.length)].path).attr("fill", "hsl(" + 30 + ", 70%, 43%)").attr("fill-opacity", "0.25");    
            dancer.append("path").attr("d", frames.frames[Math.abs((frame - 0) % frames.frames.length)].path).attr("fill", "hsl(" + 0 + ", 0%, 0%)").attr("fill-opacity", "1.00");    
        
            frame++;
            frame = frame % frames.frames.length

        }

    </script>
 </head>
 <body onload="create();">
    <div style="width: 100%; height:100%" id = "svgcontainer">
    </div>

 </body>   
</html>

